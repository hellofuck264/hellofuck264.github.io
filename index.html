<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>我的个人主页</title>
  <meta name="description" content="个人简介、项目与联系方式" />
  <style>
    :root{
      --bg:#0b0c10; /* 深色背景 */
      --card:#12141a;
      --fg:#e8ecf1; /* 文字颜色 */
      --muted:#a9b1bb;
      --accent:#4cc9f0; /* 主色 */
      --accent-2:#a78bfa;
      --max:1080px;
      --radius:18px;
      --shadow:0 10px 30px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    html,body{margin:0;background:var(--bg);color:var(--fg);font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"PingFang SC","Hiragino Sans GB","Microsoft YaHei",sans-serif}
    a{color:var(--accent);text-decoration:none}
    a:hover{text-decoration:underline}
    .wrap{max-width:var(--max);padding:24px;margin:0 auto}
    header{display:flex;gap:16px;align-items:center;justify-content:space-between;margin:8px 0 24px}
    .brand{display:flex;gap:12px;align-items:center}
    .logo{width:44px;height:44px;border-radius:50%;background:linear-gradient(135deg,var(--accent),var(--accent-2));box-shadow:var(--shadow)}
    nav a{margin-left:16px;color:var(--muted)}
    nav a.active, nav a:hover{color:var(--fg)}

    .hero{display:grid;grid-template-columns:1.3fr 1fr;gap:24px;align-items:center}
    @media (max-width:860px){.hero{grid-template-columns:1fr}}
    .card{background:var(--card);border-radius:var(--radius);padding:24px;box-shadow:var(--shadow)}
    h1{font-size:clamp(28px,4.5vw,44px);margin:8px 0 12px}
    .muted{color:var(--muted)}
    .btns{display:flex;gap:12px;flex-wrap:wrap;margin-top:12px}
    .btn{display:inline-block;padding:10px 16px;border-radius:12px;background:var(--accent);color:#081018;font-weight:600}
    .btn.secondary{background:#1f2330;color:var(--fg);border:1px solid #2a3040}

    section{margin:28px 0}
    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
    @media (max-width:860px){.grid{grid-template-columns:1fr}}
    .item{background:var(--card);border-radius:var(--radius);padding:18px;box-shadow:var(--shadow);display:flex;flex-direction:column}
    .item h3{margin:6px 0 8px}
    .tag{display:inline-block;padding:4px 8px;border:1px solid #2a3040;border-radius:999px;color:var(--muted);font-size:12px}

    footer{margin:36px 0 8px;color:var(--muted);text-align:center;font-size:14px}
    .split{display:grid;grid-template-columns:1fr 1fr;gap:16px}
    @media (max-width:860px){.split{grid-template-columns:1fr}}
    input,textarea{width:100%;padding:12px 14px;border-radius:12px;border:1px solid #2a3040;background:#0f1218;color:var(--fg)}
    textarea{min-height:120px;resize:vertical}
    .mailto{word-break:break-all}

    /* 相册样式 */
    #gallery .grid{grid-template-columns:repeat(4,1fr)}
    @media (max-width:1024px){#gallery .grid{grid-template-columns:repeat(3,1fr)}}
    @media (max-width:720px){#gallery .grid{grid-template-columns:repeat(2,1fr)}}
    .photo-tile{position:relative;overflow:hidden;border-radius:var(--radius)}
    .photo-tile img{width:100%;height:220px;object-fit:cover;display:block}
    .photo-tile .cap{position:absolute;left:0;right:0;bottom:0;background:linear-gradient(transparent, rgba(0,0,0,.6));padding:8px 10px;font-size:12px}
    .admin-only{display:none}
    .admin-on .admin-only{display:block}
    .hint{font-size:12px;color:var(--muted)}
    .danger{color:#ff6b6b}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <strong>周杳的网站</strong><div class="muted">摄影交流 / 数据分析 / 生活记录/  </div>
        </div>
      </div>
      <nav>
        <a href="#about" class="active">关于</a>
        <a href="#projects">项目</a>
        <a href="#gallery">相册</a>
        <a href="#contact">联系</a>
      </nav>
    </header>

    <section class="hero">
      <div class="card">
        <h1>你好，我是 <span style="color:var(--accent)">周杳</span> 👋</h1>
        <p class="muted">“热爱把复杂问题拆解成优雅的产品与代码，同时热爱摄影，希望能与世界的你们交流”。</p>
        <div class="btns">
          <a class="btn" href="#projects">查看项目</a>
          <a class="btn secondary" href="#contact">约个时间聊聊</a>
          <button id="adminToggle" class="btn secondary" type="button" title="仅本人使用">进入上传</button>
        </div>
      </div>
      <div class="card">
        <h2 style="margin:6px 0 8px">当前在做</h2>
        <ul class="muted" style="margin:0 0 8px 18px">
          <li>✳︎ 学习 Python / pandas 自动化日常表格处理</li>
          <li>✳︎ 练习前端：HTML/CSS/JS</li>
          <li>✳︎ 博客写作：每周一篇</li>
        </ul>
        <span class="tag">Last update: <script>document.write(new Date().toISOString().slice(0,10))</script></span>
      </div>
    </section>

    <section id="about">
      <h2>关于我</h2>
      <div class="card">
        <p>这里是更详细的自我介绍。你可以写职业经历、擅长技能、喜欢的技术栈、以及你正在寻找的机会。</p>
        <p class="muted">小提示：把这段文字精简为 3–5 句最有记忆点的话。</p>
      </div>
    </section>

    <section id="projects">
      <h2>项目</h2>
      <div class="grid">
        <article class="item">
          <span class="tag">Python</span>
          <h3>Excel 自动化工具</h3>
          <p class="muted">用 pandas / openpyxl 批量清洗与汇总指标，一键导出日报。</p>
          <a href="#" aria-label="项目链接">查看代码 →</a>
        </article>
        <article class="item">
          <span class="tag">Web</span>
          <h3>个人博客</h3>
          <p class="muted">记录工作流、读书与生活感悟，支持全文检索与暗色模式。</p>
          <a href="#">访问网站 →</a>
        </article>
        <article class="item">
          <span class="tag">Data</span>
          <h3>可视化面板</h3>
          <p class="muted">用 ECharts / Plotly 做的业务看板，自动拉取最新数据。</p>
          <a href="#">在线预览 →</a>
        </article>
      </div>
    </section>

    <!-- 相册 + 上传 -->
    <section id="gallery">
      <h2>相册</h2>

      <!-- 上传区（仅本人使用：前端口令 + Cloudinary 无签名上传） -->
      <div class="card admin-only" id="uploader">
        <h3 style="margin:0 0 8px">上传照片（仅本人）</h3>
        <p class="hint">说明：GitHub Pages 是静态托管，无法直接保存上传文件。这里采用 <a href="https://cloudinary.com/" target="_blank">Cloudinary</a> 的<strong>无签名上传</strong>。
          你需要在 Cloudinary 后台创建 <code>上传预设</code>（unsigned），并限制到指定文件夹与文件类型。下面填上你的 <code>cloudName</code> 与 <code>uploadPreset</code> 后即可使用。
        </p>
        <div class="split">
          <div>
            <label>Cloudinary cloudName</label>
            <input id="cloudName" value="dxryl0cju" placeholder="例：demo" />
            <label style="margin-top:8px;display:block">uploadPreset（无签名）</label>
            <input id="uploadPreset" value="ghuakzji" placeholder="例：gallery_unsigned" />
            <label style="margin-top:8px;display:block">可选：目标文件夹</label>
            <input id="folder" placeholder="例：site-gallery" />
          </div>
          <div>
            <label>选择图片</label>
            <input id="fileInput" type="file" accept="image/*" multiple />
            <label style="margin-top:8px;display:block">可选：统一标签（便于后台管理）</label>
            <input id="tags" placeholder="例：site-gallery" />
            <div class="btns" style="margin-top:10px">
              <button class="btn" id="uploadBtn" type="button">开始上传</button>
              <button class="btn secondary" id="clearLocal" type="button" title="只清除本机记录，不会删除 Cloudinary 上的图片">清除本机记录</button>
            </div>
            <p class="hint">上传后会即时出现在下方网格中；图片实际存储在 Cloudinary，页面下次打开会从本机浏览器记录中恢复缩略图（可选：你也可以改造成读取你维护的 <code>photos.json</code>）。</p>
          </div>
        </div>
        <div id="prog" class="hint"></div>
      </div>

      <div class="grid" id="galleryGrid"></div>

      <!-- 轻量灯箱 -->
      <div id="lightbox" style="position:fixed;inset:0;background:rgba(0,0,0,.85);display:none;align-items:center;justify-content:center;z-index:9999">
        <img id="lightbox-img" src="" alt="" style="max-width:90vw;max-height:90vh;border-radius:12px">
      </div>
    </section>

    <section id="contact">
      <h2>联系我</h2>
      <div class="split">
        <div class="card">
          <p class="muted">最快方式：给我发邮件。</p>
          <p class="mailto"><a href="mailto:zhouyao677@gmail.com" class="btn">zhouyao677@gmail.com</a></p>
          <p class="muted">也可接入第三方表单（Formspree / Getform）。</p>
        </div>
        <div class="card">
          <form onsubmit="event.preventDefault();alert('前端静态页无法直接收表单，建议改用 mailto 或第三方表单服务。');">
            <label>你的称呼</label>
            <input placeholder="张三" required />
            <label style="margin-top:8px;display:block">你的邮箱</label>
            <input type="email" placeholder="name@example.com" required />
            <label style="margin-top:8px;display:block">想聊什么</label>
            <textarea placeholder="简单说说你的需求……"></textarea>
            <div class="btns" style="margin-top:10px"><button class="btn" type="submit">发送</button></div>
          </form>
        </div>
      </div>
    </section>

    <footer>
      © <span id="y"></span> 你的名字 · 建站于 GitHub Pages / Vercel · <a href="#">返回顶部</a>
    </footer>
  </div>

  <script>
    document.getElementById('y').textContent=new Date().getFullYear()

    // —— 简单“本人模式”开关（前端口令，仅防君子，不具备安全性） ——
    const root = document.documentElement;
    const adminToggle = document.getElementById('adminToggle');
    adminToggle.addEventListener('click', () => {
      const ok = prompt('输入上传口令（自行约定，例如：zy-only）：');
      if(!ok) return;
      // 你可以把口令换成任意字符串；这里仅做前端挡板
      if(ok === 'zy-only'){
        document.body.classList.add('admin-on');
        alert('已进入上传模式');
        // 记忆一次会话
        sessionStorage.setItem('admin-on','1');
      }else{
        alert('口令错误');
      }
    });
    if(sessionStorage.getItem('admin-on')==='1'){
      document.body.classList.add('admin-on');
    }

    // —— 轻量灯箱 ——
    const box = document.getElementById('lightbox');
    const img = document.getElementById('lightbox-img');
    box.addEventListener('click', ()=>{ box.style.display='none'; img.src=''; });

    // —— 渲染一个图片卡片 ——
    function addPhotoCard(url, cap){
      const grid = document.getElementById('galleryGrid');
      const a = document.createElement('a');
      a.href = url; a.target = '_blank'; a.className = 'photo-tile';
      a.innerHTML = `<img src="${url}" alt="${cap||'photo'}" loading="lazy"><div class="cap">${cap||''}</div>`;
      a.addEventListener('click', (e)=>{
        e.preventDefault();
        img.src = url; box.style.display = 'flex';
      });
      grid.prepend(a);
    }

    // —— 从本机记录恢复缩略图（可选） ——
    const local = JSON.parse(localStorage.getItem('zy_photos')||'[]');
    local.forEach(p=>addPhotoCard(p.url, p.cap));
    document.getElementById('clearLocal').addEventListener('click', ()=>{
      if(confirm('仅清除本机浏览器记录，Cloudinary 上的图片不会删除。继续？')){
        localStorage.removeItem('zy_photos'); location.reload();
      }
    });

    // —— Cloudinary 无签名上传 ——
    async function uploadToCloudinary(file, cfg){
      const fd = new FormData();
      fd.append('file', file);
      fd.append('upload_preset', cfg.uploadPreset);
      if(cfg.folder) fd.append('folder', cfg.folder);
      if(cfg.tags) fd.append('tags', cfg.tags);
      // 可选：给图片加 caption（在后台可见）
      // fd.append('context', 'caption=' + encodeURIComponent(cfg.caption||''));

      const endpoint = `https://api.cloudinary.com/v1_1/${cfg.cloudName}/image/upload`;
      const res = await fetch(endpoint, { method:'POST', body: fd });
      if(!res.ok){
        const t = await res.text();
        throw new Error('上传失败：'+t);
      }
      return res.json();
    }
    document.getElementById('cloudName').value = "dxryl0cju";
document.getElementById('uploadPreset').value = "ghuakzji";

    document.getElementById('uploadBtn').addEventListener('click', async()=>{
      const cloudName = document.getElementById('cloudName').value.trim();
      const uploadPreset = document.getElementById('uploadPreset').value.trim();
      const folder = document.getElementById('folder').value.trim();
      const tags = document.getElementById('tags').value.trim();
      const files = document.getElementById('fileInput').files;
      const prog = document.getElementById('prog');

      if(!cloudName || !uploadPreset){
        alert('请先填写 cloudName 与 uploadPreset');
        return;
      }
      if(!files || !files.length){
        alert('请选择至少一张图片');
        return;
      }

      let okCnt = 0;
      for(const f of files){
        prog.textContent = `正在上传：${f.name} (${Math.round(f.size/1024)}KB)`;
        try{
          const res = await uploadToCloudinary(f, {cloudName, uploadPreset, folder, tags});
          // 使用 Cloudinary 自动生成的 secure_url
          addPhotoCard(res.secure_url, f.name);
          // 写入本机记录以便刷新后仍可见
          const list = JSON.parse(localStorage.getItem('zy_photos')||'[]');
          list.push({url: res.secure_url, cap: f.name, t: Date.now()});
          localStorage.setItem('zy_photos', JSON.stringify(list));
          okCnt++;
        }catch(err){
          console.error(err);
          alert(err.message);
        }
      }
      prog.textContent = `完成：成功 ${okCnt}/${files.length}`;
    });
  </script>
</body>
</html>
