<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>æˆ‘çš„ä¸ªäººä¸»é¡µ</title>
  <meta name="description" content="ä¸ªäººç®€ä»‹ã€é¡¹ç›®ä¸è”ç³»æ–¹å¼" />
  <style>
    :root{
      --bg:#0b0c10; /* æ·±è‰²èƒŒæ™¯ */
      --card:#12141a;
      --fg:#e8ecf1; /* æ–‡å­—é¢œè‰² */
      --muted:#a9b1bb;
      --accent:#4cc9f0; /* ä¸»è‰² */
      --accent-2:#a78bfa;
      --max:1080px;
      --radius:18px;
      --shadow:0 10px 30px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    html,body{margin:0;background:var(--bg);color:var(--fg);font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"PingFang SC","Hiragino Sans GB","Microsoft YaHei",sans-serif}
    a{color:var(--accent);text-decoration:none}
    a:hover{text-decoration:underline}
    .wrap{max-width:var(--max);padding:24px;margin:0 auto}
    header{display:flex;gap:16px;align-items:center;justify-content:space-between;margin:8px 0 24px}
    .brand{display:flex;gap:12px;align-items:center}
    .logo{width:44px;height:44px;border-radius:50%;background:linear-gradient(135deg,var(--accent),var(--accent-2));box-shadow:var(--shadow)}
    nav a{margin-left:16px;color:var(--muted)}
    nav a.active, nav a:hover{color:var(--fg)}

    .hero{display:grid;grid-template-columns:1.3fr 1fr;gap:24px;align-items:center}
    @media (max-width:860px){.hero{grid-template-columns:1fr}}
    .card{background:var(--card);border-radius:var(--radius);padding:24px;box-shadow:var(--shadow)}
    h1{font-size:clamp(28px,4.5vw,44px);margin:8px 0 12px}
    .muted{color:var(--muted)}
    .btns{display:flex;gap:12px;flex-wrap:wrap;margin-top:12px}
    .btn{display:inline-block;padding:10px 16px;border-radius:12px;background:var(--accent);color:#081018;font-weight:600}
    .btn.secondary{background:#1f2330;color:var(--fg);border:1px solid #2a3040}

    section{margin:28px 0}
    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
    @media (max-width:860px){.grid{grid-template-columns:1fr}}
    .item{background:var(--card);border-radius:var(--radius);padding:18px;box-shadow:var(--shadow);display:flex;flex-direction:column}
    .item h3{margin:6px 0 8px}
    .tag{display:inline-block;padding:4px 8px;border:1px solid #2a3040;border-radius:999px;color:var(--muted);font-size:12px}

    footer{margin:36px 0 8px;color:var(--muted);text-align:center;font-size:14px}
    .split{display:grid;grid-template-columns:1fr 1fr;gap:16px}
    @media (max-width:860px){.split{grid-template-columns:1fr}}
    input,textarea{width:100%;padding:12px 14px;border-radius:12px;border:1px solid #2a3040;background:#0f1218;color:var(--fg)}
    textarea{min-height:120px;resize:vertical}
    .mailto{word-break:break-all}

    /* ç›¸å†Œæ ·å¼ */
    #gallery .grid{grid-template-columns:repeat(4,1fr)}
    @media (max-width:1024px){#gallery .grid{grid-template-columns:repeat(3,1fr)}}
    @media (max-width:720px){#gallery .grid{grid-template-columns:repeat(2,1fr)}}
    .photo-tile{position:relative;overflow:hidden;border-radius:var(--radius)}
    .photo-tile img{width:100%;height:220px;object-fit:cover;display:block}
    .photo-tile .cap{position:absolute;left:0;right:0;bottom:0;background:linear-gradient(transparent, rgba(0,0,0,.6));padding:8px 10px;font-size:12px}
    .admin-only{display:none}
    .admin-on .admin-only{display:block}
    .hint{font-size:12px;color:var(--muted)}
    .danger{color:#ff6b6b}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <strong>å‘¨æ³çš„ç½‘ç«™</strong><div class="muted">æ‘„å½±äº¤æµ / æ•°æ®åˆ†æ / ç”Ÿæ´»è®°å½•/  </div>
        </div>
      </div>
      <nav>
        <a href="#about" class="active">å…³äº</a>
        <a href="#projects">é¡¹ç›®</a>
        <a href="#gallery">ç›¸å†Œ</a>
        <a href="#contact">è”ç³»</a>
      </nav>
    </header>

    <section class="hero">
      <div class="card">
        <h1>ä½ å¥½ï¼Œæˆ‘æ˜¯ <span style="color:var(--accent)">å‘¨æ³</span> ğŸ‘‹</h1>
        <p class="muted">â€œçƒ­çˆ±æŠŠå¤æ‚é—®é¢˜æ‹†è§£æˆä¼˜é›…çš„äº§å“ä¸ä»£ç ï¼ŒåŒæ—¶çƒ­çˆ±æ‘„å½±ï¼Œå¸Œæœ›èƒ½ä¸ä¸–ç•Œçš„ä½ ä»¬äº¤æµâ€ã€‚</p>
        <div class="btns">
          <a class="btn" href="#projects">æŸ¥çœ‹é¡¹ç›®</a>
          <a class="btn secondary" href="#contact">çº¦ä¸ªæ—¶é—´èŠèŠ</a>
          <button id="adminToggle" class="btn secondary" type="button" title="ä»…æœ¬äººä½¿ç”¨">è¿›å…¥ä¸Šä¼ </button>
        </div>
      </div>
      <div class="card">
        <h2 style="margin:6px 0 8px">å½“å‰åœ¨åš</h2>
        <ul class="muted" style="margin:0 0 8px 18px">
          <li>âœ³ï¸ å­¦ä¹  Python / pandas è‡ªåŠ¨åŒ–æ—¥å¸¸è¡¨æ ¼å¤„ç†</li>
          <li>âœ³ï¸ ç»ƒä¹ å‰ç«¯ï¼šHTML/CSS/JS</li>
          <li>âœ³ï¸ åšå®¢å†™ä½œï¼šæ¯å‘¨ä¸€ç¯‡</li>
        </ul>
        <span class="tag">Last update: <script>document.write(new Date().toISOString().slice(0,10))</script></span>
      </div>
    </section>

    <section id="about">
      <h2>å…³äºæˆ‘</h2>
      <div class="card">
        <p>è¿™é‡Œæ˜¯æ›´è¯¦ç»†çš„è‡ªæˆ‘ä»‹ç»ã€‚ä½ å¯ä»¥å†™èŒä¸šç»å†ã€æ“…é•¿æŠ€èƒ½ã€å–œæ¬¢çš„æŠ€æœ¯æ ˆã€ä»¥åŠä½ æ­£åœ¨å¯»æ‰¾çš„æœºä¼šã€‚</p>
        <p class="muted">å°æç¤ºï¼šæŠŠè¿™æ®µæ–‡å­—ç²¾ç®€ä¸º 3â€“5 å¥æœ€æœ‰è®°å¿†ç‚¹çš„è¯ã€‚</p>
      </div>
    </section>

    <section id="projects">
      <h2>é¡¹ç›®</h2>
      <div class="grid">
        <article class="item">
          <span class="tag">Python</span>
          <h3>Excel è‡ªåŠ¨åŒ–å·¥å…·</h3>
          <p class="muted">ç”¨ pandas / openpyxl æ‰¹é‡æ¸…æ´—ä¸æ±‡æ€»æŒ‡æ ‡ï¼Œä¸€é”®å¯¼å‡ºæ—¥æŠ¥ã€‚</p>
          <a href="#" aria-label="é¡¹ç›®é“¾æ¥">æŸ¥çœ‹ä»£ç  â†’</a>
        </article>
        <article class="item">
          <span class="tag">Web</span>
          <h3>ä¸ªäººåšå®¢</h3>
          <p class="muted">è®°å½•å·¥ä½œæµã€è¯»ä¹¦ä¸ç”Ÿæ´»æ„Ÿæ‚Ÿï¼Œæ”¯æŒå…¨æ–‡æ£€ç´¢ä¸æš—è‰²æ¨¡å¼ã€‚</p>
          <a href="#">è®¿é—®ç½‘ç«™ â†’</a>
        </article>
        <article class="item">
          <span class="tag">Data</span>
          <h3>å¯è§†åŒ–é¢æ¿</h3>
          <p class="muted">ç”¨ ECharts / Plotly åšçš„ä¸šåŠ¡çœ‹æ¿ï¼Œè‡ªåŠ¨æ‹‰å–æœ€æ–°æ•°æ®ã€‚</p>
          <a href="#">åœ¨çº¿é¢„è§ˆ â†’</a>
        </article>
      </div>
    </section>

    <!-- ç›¸å†Œ + ä¸Šä¼  -->
    <section id="gallery">
      <h2>ç›¸å†Œ</h2>

      <!-- ä¸Šä¼ åŒºï¼ˆä»…æœ¬äººä½¿ç”¨ï¼šå‰ç«¯å£ä»¤ + Cloudinary æ— ç­¾åä¸Šä¼ ï¼‰ -->
      <div class="card admin-only" id="uploader">
        <h3 style="margin:0 0 8px">ä¸Šä¼ ç…§ç‰‡ï¼ˆä»…æœ¬äººï¼‰</h3>
        <p class="hint">è¯´æ˜ï¼šGitHub Pages æ˜¯é™æ€æ‰˜ç®¡ï¼Œæ— æ³•ç›´æ¥ä¿å­˜ä¸Šä¼ æ–‡ä»¶ã€‚è¿™é‡Œé‡‡ç”¨ <a href="https://cloudinary.com/" target="_blank">Cloudinary</a> çš„<strong>æ— ç­¾åä¸Šä¼ </strong>ã€‚
          ä½ éœ€è¦åœ¨ Cloudinary åå°åˆ›å»º <code>ä¸Šä¼ é¢„è®¾</code>ï¼ˆunsignedï¼‰ï¼Œå¹¶é™åˆ¶åˆ°æŒ‡å®šæ–‡ä»¶å¤¹ä¸æ–‡ä»¶ç±»å‹ã€‚ä¸‹é¢å¡«ä¸Šä½ çš„ <code>cloudName</code> ä¸ <code>uploadPreset</code> åå³å¯ä½¿ç”¨ã€‚
        </p>
        <div class="split">
          <div>
            <label>Cloudinary cloudName</label>
            <input id="cloudName" value="dxryl0cju" placeholder="ä¾‹ï¼šdemo" />
            <label style="margin-top:8px;display:block">uploadPresetï¼ˆæ— ç­¾åï¼‰</label>
            <input id="uploadPreset" value="ghuakzji" placeholder="ä¾‹ï¼šgallery_unsigned" />
            <label style="margin-top:8px;display:block">å¯é€‰ï¼šç›®æ ‡æ–‡ä»¶å¤¹</label>
            <input id="folder" placeholder="ä¾‹ï¼šsite-gallery" />
          </div>
          <div>
            <label>é€‰æ‹©å›¾ç‰‡</label>
            <input id="fileInput" type="file" accept="image/*" multiple />
            <label style="margin-top:8px;display:block">å¯é€‰ï¼šç»Ÿä¸€æ ‡ç­¾ï¼ˆä¾¿äºåå°ç®¡ç†ï¼‰</label>
            <input id="tags" placeholder="ä¾‹ï¼šsite-gallery" />
            <div class="btns" style="margin-top:10px">
              <button class="btn" id="uploadBtn" type="button">å¼€å§‹ä¸Šä¼ </button>
              <button class="btn secondary" id="clearLocal" type="button" title="åªæ¸…é™¤æœ¬æœºè®°å½•ï¼Œä¸ä¼šåˆ é™¤ Cloudinary ä¸Šçš„å›¾ç‰‡">æ¸…é™¤æœ¬æœºè®°å½•</button>
            </div>
            <p class="hint">ä¸Šä¼ åä¼šå³æ—¶å‡ºç°åœ¨ä¸‹æ–¹ç½‘æ ¼ä¸­ï¼›å›¾ç‰‡å®é™…å­˜å‚¨åœ¨ Cloudinaryï¼Œé¡µé¢ä¸‹æ¬¡æ‰“å¼€ä¼šä»æœ¬æœºæµè§ˆå™¨è®°å½•ä¸­æ¢å¤ç¼©ç•¥å›¾ï¼ˆå¯é€‰ï¼šä½ ä¹Ÿå¯ä»¥æ”¹é€ æˆè¯»å–ä½ ç»´æŠ¤çš„ <code>photos.json</code>ï¼‰ã€‚</p>
          </div>
        </div>
        <div id="prog" class="hint"></div>
      </div>

      <div class="grid" id="galleryGrid"></div>

      <!-- è½»é‡ç¯ç®± -->
      <div id="lightbox" style="position:fixed;inset:0;background:rgba(0,0,0,.85);display:none;align-items:center;justify-content:center;z-index:9999">
        <img id="lightbox-img" src="" alt="" style="max-width:90vw;max-height:90vh;border-radius:12px">
      </div>
    </section>

    <section id="contact">
      <h2>è”ç³»æˆ‘</h2>
      <div class="split">
        <div class="card">
          <p class="muted">æœ€å¿«æ–¹å¼ï¼šç»™æˆ‘å‘é‚®ä»¶ã€‚</p>
          <p class="mailto"><a href="mailto:zhouyao677@gmail.com" class="btn">zhouyao677@gmail.com</a></p>
          <p class="muted">ä¹Ÿå¯æ¥å…¥ç¬¬ä¸‰æ–¹è¡¨å•ï¼ˆFormspree / Getformï¼‰ã€‚</p>
        </div>
        <div class="card">
          <form onsubmit="event.preventDefault();alert('å‰ç«¯é™æ€é¡µæ— æ³•ç›´æ¥æ”¶è¡¨å•ï¼Œå»ºè®®æ”¹ç”¨ mailto æˆ–ç¬¬ä¸‰æ–¹è¡¨å•æœåŠ¡ã€‚');">
            <label>ä½ çš„ç§°å‘¼</label>
            <input placeholder="å¼ ä¸‰" required />
            <label style="margin-top:8px;display:block">ä½ çš„é‚®ç®±</label>
            <input type="email" placeholder="name@example.com" required />
            <label style="margin-top:8px;display:block">æƒ³èŠä»€ä¹ˆ</label>
            <textarea placeholder="ç®€å•è¯´è¯´ä½ çš„éœ€æ±‚â€¦â€¦"></textarea>
            <div class="btns" style="margin-top:10px"><button class="btn" type="submit">å‘é€</button></div>
          </form>
        </div>
      </div>
    </section>

    <footer>
      Â© <span id="y"></span> ä½ çš„åå­— Â· å»ºç«™äº GitHub Pages / Vercel Â· <a href="#">è¿”å›é¡¶éƒ¨</a>
    </footer>
  </div>

  <script>
    document.getElementById('y').textContent=new Date().getFullYear()

    // â€”â€” ç®€å•â€œæœ¬äººæ¨¡å¼â€å¼€å…³ï¼ˆå‰ç«¯å£ä»¤ï¼Œä»…é˜²å›å­ï¼Œä¸å…·å¤‡å®‰å…¨æ€§ï¼‰ â€”â€”
    const root = document.documentElement;
    const adminToggle = document.getElementById('adminToggle');
    adminToggle.addEventListener('click', () => {
      const ok = prompt('è¾“å…¥ä¸Šä¼ å£ä»¤ï¼ˆè‡ªè¡Œçº¦å®šï¼Œä¾‹å¦‚ï¼šzy-onlyï¼‰ï¼š');
      if(!ok) return;
      // ä½ å¯ä»¥æŠŠå£ä»¤æ¢æˆä»»æ„å­—ç¬¦ä¸²ï¼›è¿™é‡Œä»…åšå‰ç«¯æŒ¡æ¿
      if(ok === 'zy-only'){
        document.body.classList.add('admin-on');
        alert('å·²è¿›å…¥ä¸Šä¼ æ¨¡å¼');
        // è®°å¿†ä¸€æ¬¡ä¼šè¯
        sessionStorage.setItem('admin-on','1');
      }else{
        alert('å£ä»¤é”™è¯¯');
      }
    });
    if(sessionStorage.getItem('admin-on')==='1'){
      document.body.classList.add('admin-on');
    }

    // â€”â€” è½»é‡ç¯ç®± â€”â€”
    const box = document.getElementById('lightbox');
    const img = document.getElementById('lightbox-img');
    box.addEventListener('click', ()=>{ box.style.display='none'; img.src=''; });

    // â€”â€” æ¸²æŸ“ä¸€ä¸ªå›¾ç‰‡å¡ç‰‡ â€”â€”
    function addPhotoCard(url, cap){
      const grid = document.getElementById('galleryGrid');
      const a = document.createElement('a');
      a.href = url; a.target = '_blank'; a.className = 'photo-tile';
      a.innerHTML = `<img src="${url}" alt="${cap||'photo'}" loading="lazy"><div class="cap">${cap||''}</div>`;
      a.addEventListener('click', (e)=>{
        e.preventDefault();
        img.src = url; box.style.display = 'flex';
      });
      grid.prepend(a);
    }

    // â€”â€” ä»æœ¬æœºè®°å½•æ¢å¤ç¼©ç•¥å›¾ï¼ˆå¯é€‰ï¼‰ â€”â€”
    const local = JSON.parse(localStorage.getItem('zy_photos')||'[]');
    local.forEach(p=>addPhotoCard(p.url, p.cap));
    document.getElementById('clearLocal').addEventListener('click', ()=>{
      if(confirm('ä»…æ¸…é™¤æœ¬æœºæµè§ˆå™¨è®°å½•ï¼ŒCloudinary ä¸Šçš„å›¾ç‰‡ä¸ä¼šåˆ é™¤ã€‚ç»§ç»­ï¼Ÿ')){
        localStorage.removeItem('zy_photos'); location.reload();
      }
    });

    // â€”â€” Cloudinary æ— ç­¾åä¸Šä¼  â€”â€”
    async function uploadToCloudinary(file, cfg){
      const fd = new FormData();
      fd.append('file', file);
      fd.append('upload_preset', cfg.uploadPreset);
      if(cfg.folder) fd.append('folder', cfg.folder);
      if(cfg.tags) fd.append('tags', cfg.tags);
      // å¯é€‰ï¼šç»™å›¾ç‰‡åŠ  captionï¼ˆåœ¨åå°å¯è§ï¼‰
      // fd.append('context', 'caption=' + encodeURIComponent(cfg.caption||''));

      const endpoint = `https://api.cloudinary.com/v1_1/${cfg.cloudName}/image/upload`;
      const res = await fetch(endpoint, { method:'POST', body: fd });
      if(!res.ok){
        const t = await res.text();
        throw new Error('ä¸Šä¼ å¤±è´¥ï¼š'+t);
      }
      return res.json();
    }
    document.getElementById('cloudName').value = "dxryl0cju";
document.getElementById('uploadPreset').value = "ghuakzji";

    document.getElementById('uploadBtn').addEventListener('click', async()=>{
      const cloudName = document.getElementById('cloudName').value.trim();
      const uploadPreset = document.getElementById('uploadPreset').value.trim();
      const folder = document.getElementById('folder').value.trim();
      const tags = document.getElementById('tags').value.trim();
      const files = document.getElementById('fileInput').files;
      const prog = document.getElementById('prog');

      if(!cloudName || !uploadPreset){
        alert('è¯·å…ˆå¡«å†™ cloudName ä¸ uploadPreset');
        return;
      }
      if(!files || !files.length){
        alert('è¯·é€‰æ‹©è‡³å°‘ä¸€å¼ å›¾ç‰‡');
        return;
      }

      let okCnt = 0;
      for(const f of files){
        prog.textContent = `æ­£åœ¨ä¸Šä¼ ï¼š${f.name} (${Math.round(f.size/1024)}KB)`;
        try{
          const res = await uploadToCloudinary(f, {cloudName, uploadPreset, folder, tags});
          // ä½¿ç”¨ Cloudinary è‡ªåŠ¨ç”Ÿæˆçš„ secure_url
          addPhotoCard(res.secure_url, f.name);
          // å†™å…¥æœ¬æœºè®°å½•ä»¥ä¾¿åˆ·æ–°åä»å¯è§
          const list = JSON.parse(localStorage.getItem('zy_photos')||'[]');
          list.push({url: res.secure_url, cap: f.name, t: Date.now()});
          localStorage.setItem('zy_photos', JSON.stringify(list));
          okCnt++;
        }catch(err){
          console.error(err);
          alert(err.message);
        }
      }
      prog.textContent = `å®Œæˆï¼šæˆåŠŸ ${okCnt}/${files.length}`;
    });
  </script>
</body>
</html>
